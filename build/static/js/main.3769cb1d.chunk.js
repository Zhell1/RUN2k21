(this["webpackJsonpmon-app"]=this["webpackJsonpmon-app"]||[]).push([[0],{311:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),o=n.n(c),s=(n(81),n(8)),i=n.n(s),u=n(14),l=(n(51),n(364)),p=n(362),d=n(363),j=n(356),b=n(19),h=n(353),f=n(359),x=n(365),O=n(352),g=n(351),m=n(350),y=n(22),v=n(2);function w(e){var t=a.a.useState(e.open),n=Object(b.a)(t,2),r=(n[0],n[1],Object(y.a)()),c=Object(m.a)(r.breakpoints.down("sm"));function o(){e.handleClose&&e.handleClose()}return Object(v.jsx)("div",{children:Object(v.jsxs)(x.a,{fullScreen:c,open:e.open,onClose:o,fullWidth:!0,"aria-labelledby":"responsive-dialog-title",keepMounted:!0,children:[Object(v.jsx)(g.a,{children:e.children}),Object(v.jsx)(O.a,{children:Object(v.jsx)(h.a,{onClick:o,color:"primary",autoFocus:!0,children:"Close"})})]})})}var k=n(355),S=n(354),C=n(360),T=n(361),R=n(367),_=n(358),P=n(366),E=n(357),I=n(43),q=n(59),B=n.n(q);function D(){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=170,e.next=3,B()("https://api.preev.pro/v1/tickers/12eLTxv1vyUeJtp5zqWbqpdWvfLdZ7dGf8",{method:"GET"}).then((function(e){return e.json()})).then((function(e){t=e.p.ppi.l}));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=2e4;function K(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(i.a.mark((function e(t,n,r){var a,c,o,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=s.length>3&&void 0!==s[3]?s[3]:200,c=s.length>4&&void 0!==s[4]?s[4]:U,(o=s.length>5&&void 0!==s[5]?s[5]:null)||(o=Date.now(),console.log("set timestamp at ",o)),setTimeout(Object(u.a)(i.a.mark((function e(){var s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=window.run,e.next=3,s.load(t+"_o1");case 3:return u=e.sent,e.next=6,u.sync();case 6:(l=u.value)?(console.log("success with value: myRequest=",u," \n\n value = ",l),r(l,u.location)):Date.now()-o>c?(console.log("timedout at ",Date.now()),n()):K(t,n,r,a,c,o);case 8:case"end":return e.stop()}}),e)}))),a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var F=n(60),J=n.n(F);function M(e){var t=document.getElementById(e);t.select(),t.setSelectionRange(0,99999),document.execCommand("copy")}function N(e,t){var n=Object(I.b)().enqueueSnackbar,r=function(t){return function(){n("Copied "+e.copiedmess.substr(0,15)+"...",{variant:t})}};return Object(v.jsx)(a.a.Fragment,{children:Object(v.jsx)("span",{onClick:function(){return M(e.idtocopy)},children:Object(v.jsxs)(h.a,{variant:"outlined",size:"small",onClick:r("success"),children:[Object(v.jsx)(J.a,{size:"small",color:"primary"}),"\xa0 Copy origin"]})})})}var V=window.Run,H=Object(S.a)({root:{maxWidth:300,textAlign:"left",margin:"20px"}});function W(e){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.run,console.log("run = ",n),e.next=4,n.load(t);case 4:return r=e.sent,e.next=7,r.sync();case 7:return e.next=9,n.sync();case 9:return console.log("load_contracts(): contract = ",r,"for",t),e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){var t=H(),n=Object(r.useState)(!1),a=Object(b.a)(n,2),c=a[0],o=a[1],s=Object(r.useState)(null),l=Object(b.a)(s,2),p=l[0],d=l[1],x=Object(r.useState)(null),O=Object(b.a)(x,2),g=O[0],m=O[1],y=Object(r.useState)(),S=Object(b.a)(y,2),q=S[0],B=S[1],L=Object(r.useState)(),U=Object(b.a)(L,2),A=U[0],F=U[1];function J(){return(J=Object(u.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.oracleOrigin){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,W(e.oracleOrigin);case 4:return n=t.sent,console.log("my_oracleRequest = ",n),console.log("my_oracleRequest.oracle = ",n.oracle),d(n.location),r=n.oracle,t.next=11,r.sync();case 11:m(r.priceUSD);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c||(o(!0),function(){J.apply(this,arguments)}());var M=Object(r.useState)(!1),G=Object(b.a)(M,2),z=G[0],Q=G[1],Y=Object(r.useState)(!1),X=Object(b.a)(Y,2),Z=X[0],$=X[1],ee=function(){var t=Object(u.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:$(!0),(n=window.run).purse.set_prestoWidget(e.widgetname,ae,n),ue("clicked");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function te(){ue("timedout")}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(u.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.run,console.log("updated_location   = ",n),e.next=4,r.load(n);case 4:a=e.sent,F(a.location),B(a.value),console.log("callback_successOracle(): jig value=",t," & callback value=",a.value),ue("response");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("successCallback!! txid=",t),ue("paid"),$(!1),K(t,te,ne);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oe=Object(r.useState)("init"),se=Object(b.a)(oe,2),ie=se[0],ue=se[1];function le(){return(le=Object(u.a)(i.a.mark((function e(){var t,n,r,a,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.run,p){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,W(p);case 5:return n=e.sent,e.next=8,n.sync();case 8:return r=n.oracle,console.log("my_oracle 1 = ",r),e.next=12,r.sync();case 12:return e.next=14,D();case 14:return a=e.sent,c=parseInt(r.priceUSD/a*1e8,10),e.next=18,t.sync();case 18:return(o=new V.Transaction).update((function(){s=new n(c)})),e.next=22,o.export({pay:!0});case 22:e.sent,console.log("handleOpenPayPresto(): myRequest = ",s);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"clicked"==ie&&(ue("ready"),function(){le.apply(this,arguments)}());var pe,de=g?"$"+g:"loading";return Object(v.jsxs)(k.a,{className:t.root,children:[Object(v.jsxs)(w,{open:z,handleClose:function(){Q(!1)},children:[Object(v.jsx)(j.a,{variant:"h5",children:e.title}),Object(v.jsx)("br",{}),e.description,Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"Price ",de,"/call ",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"init"==ie?Object(v.jsx)(h.a,{variant:"contained",color:"primary",onClick:ee,children:"TEST ORACLE"}):"paid"==ie?Object(v.jsxs)("div",{children:[Object(v.jsx)(P.a,{severity:"info",children:"Sent, waiting for Oracle now... "}),Object(v.jsx)(E.a,{})]}):"response"==ie?Object(v.jsx)("div",{children:Object(v.jsxs)(P.a,{severity:"success",children:["Oracle responded with value: ",q,Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("a",{href:"https://run.network/explorer/?query="+A+"&network=main",target:"_blank",children:"Click here to see your onchain updated jig"})]})}):"timedout"==ie?Object(v.jsx)("div",{children:Object(v.jsxs)(P.a,{severity:"warning",children:["Request timed out after ",parseInt(20,10)," seconds, try again or contact admin."]})}):Object(v.jsx)(h.a,{variant:"contained",color:"primary",onClick:ee,children:"TEST ORACLE"}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"Origin to load:",Object(v.jsx)("br",{}),Object(v.jsx)("a",{href:(pe=e.oracleOrigin,"https://run.network/explorer/?query="+pe+"&network=main"),target:"_blank",rel:"noopener noreferrer",children:e.oracleOrigin}),Object(v.jsx)("input",{type:"text",value:e.oracleOrigin,readOnly:!0,id:"textToCopy_"+e.oracleOrigin,style:{opacity:"0"}}),Object(v.jsx)("br",{}),Object(v.jsx)(I.a,{maxSnack:3,children:Object(v.jsx)(N,{idtocopy:"textToCopy_"+e.oracleOrigin,copiedmess:e.oracleOrigin})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),"Example of use:",Object(v.jsx)("br",{}),Object(v.jsx)(R.a,{language:"javascript",style:_.a,wrapLongLines:"true",children:"class MysteriousEgg extends Jig\n{ \n  init(){ \n    this.randomValue = new RandomValue()\n  }\n  hatch(){\n    let x = this.randomValue.value\n    // rarity between 1-99 but we make it super rare to get one near 100\n    this.rarity = parseInt(power(100,x*x*x), 10)\n  }\n}\nMysteriousEgg.deps = { RandomValue, power }\n\n// Timestamp Oracle idea => make an egg that can only be hatched on full moon\n"}),Object(v.jsx)(f.a,{style:{padding:"0px 178px"},children:Object(v.jsx)("a",{href:"https://github.com/Zhell1/RUN2k21",style:{textDecoration:"none"},target:"_blank",rel:"noopener noreferrer",children:Object(v.jsx)(h.a,{variant:"contained",children:"See more on GitHub"})})}),Object(v.jsx)(w,{open:Z,handleClose:function(){$(!1)},children:Object(v.jsx)("div",{id:e.widgetname,className:e.widgetname})})]}),Object(v.jsx)(C.a,{onClick:function(){Q(!0)},children:Object(v.jsxs)(T.a,{children:[Object(v.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.title}),Object(v.jsx)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description}),Object(v.jsx)("br",{}),Object(v.jsx)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(v.jsx)("span",{style:{background:"#3f51b5",borderRadius:"4px",color:"white",padding:"3px"},children:de})})]})})]})}var Q,Y=n(65),X=n(66),Z=window.bsv,$=(window.bsvjs,window.Run,window.Paypresto.Presto),ee=window.Paypresto.embed,te=function(){function e(){Object(Y.a)(this,e)}return Object(X.a)(e,[{key:"set_prestoWidget",value:function(e,t,n){this.widgetname=e,this.successCallback=t,this.run=n}},{key:"pay",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,a,c,o,s,l,p,d,j=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new Z.Transaction(t),a=[],c=0;c<r.inputs.length;c++)a.push({txid:r.inputs[c].prevTxId.toString("hex"),vout:r.inputs[c].outputIndex,satoshis:n[c].satoshis,script:n[c].script});for(o=Z.Script(r.outputs[0].script).toASM().split(" "),s=[],l=2;l<o.length;l++)s.push(decodeURIComponent(o[l].replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&")));for(p=[{data:s}],d=1;d<r.outputs.length;d++)p.push({satoshis:r.outputs[d].satoshis,to:Z.Address.fromPublicKeyHash(new Z.Script.fromBuffer(r.outputs[d]._scriptBuffer).getPublicKeyHash()).toString()});$.create({key:"Kx2p4o7FYJYjEwufdYJLXjPtu2vaSpQ8mB7mjMJnaHnPSrGQ1nQk",description:"RUN2K21_Hackaton_RunCraft",outputs:p}).mount(ee("#"+this.widgetname,{style:["rounded","border-thick"]})).on("funded",function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,c,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("on funded..."),n=t.forge.inputs.pop(),a.forEach((function(e){return t.forge.addInput(e)})),t.forge.inputs.push(n),t.forge.build(),r=j.run,c=0;c<t.forge.inputs.length-1;c++)t.signTxIn(c,{keyPair:(new Z.KeyPair).fromPrivKey((new Z.PrivKey).fromString(r.owner.privkey))});return t.signTxIn(t.forge.inputs.length-1,{keyPair:t.keyPair}),o=t.getRawTx(),console.log("broadcasting tx=",t),e.next=12,r.blockchain.broadcast(o);case 12:s=e.sent,console.log("TX sent",s),j.successCallback(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).on("error",(function(e){console.log("Error: ",e)}));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ne=window.Run,re=new te,ae="c968fc2674921d07c39051fa735e6a5ebbb69cc0b8b90232e76ae87e3d72101a_o2";var ce=function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.load(ae);case 2:return t=e.sent,console.log("jig = ",t),e.next=6,t.sync();case 6:console.log("jig = ",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Q||(Q=new ne({network:"main",purse:re,trust:"*",app:"RUN2K2021_Hackaton_RunCraft"})),Q.activate(),window.run=Q,function(){e.apply(this,arguments)}(),Object(v.jsx)("div",{className:"App",children:Object(v.jsxs)("header",{className:"App-header",style:{display:"block"},children:[Object(v.jsx)(p.a,{position:"static",style:{marginBottom:"2em"},children:Object(v.jsx)(d.a,{children:Object(v.jsx)(j.a,{variant:"h5",children:"Oracles"})})}),Object(v.jsxs)(l.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"flex-start",children:[Object(v.jsx)(z,{title:"Random Value Oracle",description:"This Oracle gives you a random value as a float between 0 and 1, same as Math.random() but for jigs.",widgetname:"oracle1",oracleOrigin:ae}),Object(v.jsx)(z,{title:"BSV/USD Price Oracle",description:"This Oracle gives you the current BSV price in USD",price:.01,widgetname:"oracle2",oracleOrigin:"c1f16893516de7824af5984aa343ce4df42d38b238b8b1dced2b1d3abb44361c_o2"}),Object(v.jsx)(z,{title:"Timestamp Oracle",description:"This Oracle gives you the current timestamp in ms, same as Date.now() but for jigs.",price:.01,widgetname:"oracle3",oracleOrigin:"fcbf7ad48704593f46c1d357d0d6913f442fc244c58c2ef0fef78cb15a5dac7e_o2"})]})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,369)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(ce,{})}),document.getElementById("root")),oe()},51:function(e,t,n){},81:function(e,t,n){}},[[311,1,2]]]);
//# sourceMappingURL=main.3769cb1d.chunk.js.map